{# === CONFIG: Change these to highlight another date === #}
{% set currentMonth = 0 %} {# 0-based index for "Canto Inicial" #}
{% set currentDay = 11 %}

{# === Calendar data from calendario-orneu-geral.json === #}
{% set months = [
  { "name": "Canto Inicial", "length": 40 },
  { "name": "Sopro Calmo", "length": 40 },
  { "name": "Ecos Crescentes", "length": 40 },
  { "name": "Ascensão", "length": 40 },
  { "name": "Estiagem", "length": 40 },
  { "name": "Sol Ardente", "length": 40 },
  { "name": "Ressonância", "length": 40 },
  { "name": "Sussurros", "length": 40 },
  { "name": "Folha Partida", "length": 40 },
  { "name": "Entardecer", "length": 40 },
  { "name": "Silêncio", "length": 5 }
] %}

{% set weekdays = ["Ruth", "Nuar", "Garn", "Pel", "Shi", "Oth"] %}
{% set firstDay = 0 %} {# 0 = Ruth #}

{# === Select current month and calculate offset === #}
{% set month = months[currentMonth] %}

<h2 style="text-align:center;">Calendário de Orneu — {{ month.name }}</h2>

<div class="calendar-wrapper">
  <div class="month-block">
    <div class="week-header">
      {% for day in weekdays %}
        <div class="weekday">{{ day }}</div>
      {% endfor %}
    </div>

    {% set totalDaysBefore = 0 %}
    {% for i in range(0, currentMonth) %}
      {% set totalDaysBefore = totalDaysBefore + months[i].length %}
    {% endfor %}
    {% set startWeekday = (firstDay + totalDaysBefore) % weekdays.length %}

    <div class="days-grid">
      {% for i in range(0, startWeekday) %}
        <div class="day empty"></div>
      {% endfor %}

      {% for day in range(1, month.length + 1) %}
        <div class="day {% if day == currentDay %}highlight{% endif %}">{{ day }}</div>
      {% endfor %}
    </div>
  </div>
</div>

<style>
  .calendar-wrapper {
    display: flex;
    flex-direction: column;
    max-width: 600px;
    margin: 2rem auto;
    padding: 0 1rem;
  }

  .month-block {
    background: #1e1e1e;
    padding: 1rem;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.5);
    color: #fff;
  }

  .week-header {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    font-weight: bold;
    text-align: center;
    margin-bottom: 0.3rem;
  }

  .weekday {
    padding: 0.2rem;
    color: #bbb;
  }

  .days-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 0.2rem;
  }

  .day {
    background: #333;
    padding: 0.6rem 0;
    text-align: center;
    border-radius: 4px;
  }

  .day.highlight {
    background: #f39c12;
    color: black;
    font-weight: bold;
    border: 2px solid #fff;
  }

  .day.empty {
    background: transparent;
    border: none;
  }
</style>
