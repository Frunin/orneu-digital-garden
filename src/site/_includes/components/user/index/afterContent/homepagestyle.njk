{# homepagestyle.njk #}

{% macro menuItemOpenAll(name, item, step) %}
  <div style="margin-left: {{ step * 1.5 }}rem; margin-bottom: 0.3rem;">
    {% if item.isFolder %}
      <div><strong>{{ name }}</strong></div>
      {% for childName, child in item %}
        {# Skip metadata keys #}
        {% if childName not in ["isNote", "isFolder", "hide", "permalink", "name", "noteIcon", "pinned"] %}
          {{ menuItemOpenAll(childName, child, step + 1) }}
        {% endif %}
      {% endfor %}
    {% elif item.isNote %}
      <div>
        <a href="{{ item.permalink }}">{{ item.name }}</a>
      </div>
    {% else %}
      {# In case there are unexpected structures, just show the name #}
      <div>{{ name }}</div>
    {% endif %}
  </div>
{% endmacro %}

<style>
  /* Simple styling for clarity */
  a {
    text-decoration: none;
    color: #0366d6;
  }
  a:hover {
    text-decoration: underline;
  }
</style>

<h2>File Tree Index</h2>

{# Check the root node "Orneu" exists #}
{% if filetree and filetree.Orneu %}
  {{ menuItemOpenAll("Orneu", filetree.Orneu, 0) }}
{% else %}
  <p>No filetree data found.</p>
{% endif %}
