{% macro menuItem(name, node, step = 0, currentPath = "") %}
  {% if node.isNote and not node.hide %}
    <div class="note-item" style="margin-left: {{ step * 1.5 }}rem;">
      <a href="{{ node.permalink }}">{{ node.name }}</a>
    </div>
  {% elif node.isFolder %}
    <div class="folder-item folder-{{ name | lower | replace(' ', '-') }}" style="margin-left: {{ step * 1.5 }}rem;" x-data="{ open: false }">
      <div @click="open = !open" style="cursor:pointer; user-select:none; display: flex; align-items: center;">
        <span class="folder-icon"></span>
        <span x-text="open ? '▼' : '▶'"></span>
        <span style="margin-left: 0.5rem;">{{ name }}</span>
      </div>
      <div x-show="open" style="margin-left: 1rem;">
        {% for childName, childNode in node %}
          {% if childName not in ['isNote', 'isFolder', 'hide', 'name', 'permalink', 'noteIcon', 'pinned'] %}
            {{ menuItem(childName, childNode, step + 1, currentPath + '/' + childName) }}
          {% endif %}
        {% endfor %}
      </div>
    </div>
  {% endif %}
{% endmacro %}

<div x-data>
  {% for key, node in filetree.Orneu %}
    {{ menuItem(key, node) }}
  {% endfor %}
</div>

<style>
  .note-item a {
    text-decoration: none;
  }

  .folder-item {
    margin-bottom: 0.25rem;
  }

  .folder-icon {
    display: inline-block;
    width: 20px;
    height: 20px;
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    margin-right: 0.5rem;
  }

  /* Folder-specific SVG icons as background images */

  .folder-grupos-notáveis .folder-icon {
    background-image: url("data:image/svg+xml;utf8,<svg fill='black' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10Zm3.124 1.5h-.427a6.5 6.5 0 0 1-5.394 0h-.427A5.876 5.876 0 0 0 3 19.376a.624.624 0 0 0 .624.624h16.752a.624.624 0 0 0 .624-.624A5.876 5.876 0 0 0 15.124 13.5Z'/></svg>");
  }

  .folder-itens .folder-icon {
    background-image: url("data:image/svg+xml;utf8,<svg fill='black' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M21.707 20.293 18.6 17.186a7.932 7.932 0 0 0 1.4-4.486C20 8.262 16.738 5 12.7 5S5.4 8.262 5.4 12.7 8.662 20.4 12.7 20.4a7.932 7.932 0 0 0 4.486-1.4l3.107 3.107a1 1 0 0 0 1.414-1.414ZM12.7 18.4a5.7 5.7 0 1 1 0-11.4 5.7 5.7 0 0 1 0 11.4Z'/></svg>");
  }

  .folder-localizações .folder-icon {
    background-image: url("data:image/svg+xml;utf8,<svg fill='black' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12 2a10 10 0 1 0 10 10A10.013 10.013 0 0 0 12 2Zm8 10a8.078 8.078 0 0 1-.686 3.253l-1.723-1.58a1.5 1.5 0 0 0-1.2-.396L12.646 14.1l.188-2.255a.5.5 0 0 0-.615-.52l-3.483.83-1.078-1.394a.5.5 0 0 0-.886.325l-.027 2.626-1.952.482a7.975 7.975 0 0 1-.223-5.193l2.451.545a.5.5 0 0 0 .6-.4l.503-2.67 2.85-.57.83 2.491a.5.5 0 0 0 .939.036L13.3 4.285A8.033 8.033 0 0 1 20 12Z'/></svg>");
  }

  .folder-mapas .folder-icon {
    background-image: url("data:image/svg+xml;utf8,<svg fill='black' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M20.5 2.02a.97.97 0 0 0-.57.15L15 4.83 9 2.02 3.57 4.78a1 1 0 0 0-.57.9v16.3a1 1 0 0 0 1.43.9L9 20.17l6 2.81 5.43-2.76a1 1 0 0 0 .57-.9V3a1 1 0 0 0-.5-.98ZM15 20.17l-6-2.81V3.83l6 2.8Z'/></svg>");
  }

  .folder-mito-da-criação .folder-icon {
    background-image: url("data:image/svg+xml;utf8,<svg fill='black' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M6 3a1 1 0 0 0-1 1v6a4 4 0 0 0 3 3.87V21a1 1 0 0 0 2 0v-7.13a4 4 0 0 0 3-3.87V4a1 1 0 0 0-2 0v6a2 2 0 0 1-4 0V4a1 1 0 0 0-1-1Z'/></svg>");
  }
</style>

<script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
